# Makefile –¥–ª—è RAG AI –ø—Ä–æ–µ–∫—Ç–∞

.PHONY: help setup collect build generate run test clean docker-up docker-down

help:
	@echo "ü§ñ RAG AI Telegram Clone - –ö–æ–º–∞–Ω–¥—ã:"
	@echo ""
	@echo "  make setup      - –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π"
	@echo "  make collect    - –°–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö –∏–∑ Telegram (—à–∞–≥ 1)"
	@echo "  make build      - –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –≤–µ–∫—Ç–æ—Ä–Ω–æ–π –ë–î (—à–∞–≥ 2)"
	@echo "  make generate   - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–æ–º–ø—Ç–∞ (—à–∞–≥ 3)"
	@echo "  make run        - –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞ (—à–∞–≥ 4)"
	@echo "  make all        - –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —à–∞–≥–æ–≤"
	@echo "  make test       - –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤"
	@echo "  make clean      - –û—á–∏—Å—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö"
	@echo "  make docker-up  - –ó–∞–ø—É—Å–∫ –≤ Docker"
	@echo "  make docker-down- –û—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker"
	@echo ""

setup:
	pip install -r requirements.txt

collect:
	python 1_collect_data.py

build:
	python build_vector_db_fixed.py

generate:
	python style_analyzer_smart.py

run:
	python 3_telegram_bot.py

all: collect build generate run

test:
	python -m pytest tests/ -v

clean:
	rm -rf data/*.json
	rm -rf data/chroma_db
	rm -f *.log

docker-up:
	docker-compose up -d --build

docker-down:
	docker-compose down

docker-logs:
	docker-compose logs -f

docker-shell:
	docker exec -it rag-ai-app /bin/bash